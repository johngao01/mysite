<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.108.0">
    <title>数据可视化</title>
    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/sidebars/">
    <link href="../static/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <script src="../static/bootstrap/js/sidebars.js"></script>
    <link href="../static/bootstrap/css/sidebars.css" rel="stylesheet">
    <link href="../static/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <script type="text/javascript" src="../static/echarts/echarts.min.js"></script>
    <script src="../static/bootstrap/js/bootstrap.bundle.min.js"></script>
    <style>
        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }

        .bi {
            vertical-align: -.125em;
            fill: currentColor;
        }

        .nav-scroller .nav {
            display: flex;
            flex-wrap: nowrap;
            padding-bottom: 1rem;
            margin-top: -1px;
            overflow-x: auto;
            text-align: center;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
        }

        .left-container {
            position: relative;
            top: 0;
            height: 100vh;
        }

        .left-container .mini {
            position: absolute;
            top: 0;
            transition: all 0.5s !important;
        }

        .table {
            border-collapse: collapse;
            width: 100%;
        }

        .table th,
        .table td {
            padding: 8px;
            border: 1px solid #ddd;
            text-align: center;
            vertical-align: middle; /* 设置垂直居中 */
        }

        .left-container .large {
            position: relative;
            top: 0;
            z-index: -10;
            transition: all 0.5s !important;
            overflow: hidden;
        }

        .left-container:hover .mini {
            width: 220px !important;
        }

        .left-container:hover {
            width: 220px !important;
        }

        .left-container:hover .large {
            z-index: 10 !important;
            width: 220px !important;
        }
    </style>
</head>
<body>

<main class="d-flex flex-nowrap" style="height: 100vh ! important;">
    <div class="left-container">
        <div class="d-flex flex-column flex-shrink-0 p-3 bg-light large" style="width: 4.5rem; height: 100%">
            <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none">
                <img class="bi pe-none me-2" src="../static/bootstrap-icons/icons/bootstrap-fill.svg"
                     alt="overview" width="40" height="32">
                <span class="fs-4">Sidebar</span>
            </a>
            <hr>
            <ul class="nav nav-pills flex-column mb-auto">
                <li class="nav-item">
                    <a href="#" class="nav-link active" aria-current="page">
                        <img class="bi pe-none me-2" src="../static/bootstrap-icons/icons/speedometer2.svg"
                             alt="overview" width="16" height="16">
                        Overview
                    </a>
                </li>
                <li>
                    <a href="#" class="nav-link link-dark">
                        <img class="bi pe-none me-2" src="../static/bootstrap-icons/icons/table.svg" alt="overview"
                             width="16" height="16">
                        Orders
                    </a>
                </li>
            </ul>
            <hr>

            <div class="flex-nowrap" style="display: flex; align-items: center;">
                <a href="#" class="d-flex align-items-center link-dark text-decoration-none dropdown-toggle"
                   data-bs-toggle="dropdown" aria-expanded="false">
                    <img src="../static/src/awesome_gao-mini.jpg" alt="" width="32" height="32"
                         class="rounded-circle me-2">
                    <strong>gzp</strong>
                </a>
                <ul id="user-info-menu" class="dropdown-menu text-small shadow" style="position:relative; z-index: 20;">
                    <li><a class="dropdown-item" href="#">New project...</a></li>
                    <li><a class="dropdown-item" href="#">Settings</a></li>
                    <li><a class="dropdown-item" href="#">Profile</a></li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item" href="#">Sign out</a></li>
                </ul>
                <div class="d-flex align-items-center link-dark text-decoration-none">
                    <button id="pin-btn" class="btn btn-primary"
                            style="position: absolute;right: 20px;background-color: #FFFFFF!important;">
                        <img src="../static/bootstrap-icons/icons/pin-angle.svg" alt="Bootstrap" width="12"
                             height="12">
                    </button>
                </div>
            </div>
        </div>

        <div class="d-flex flex-column flex-shrink-0 bg-light mini" style="width: 4.5rem;height: 100%">
            <a href="/" class="d-block p-3 link-dark text-decoration-none" title="Icon-only" data-bs-toggle="tooltip"
               data-bs-placement="right">
                <img class="bi pe-none" src="../static/bootstrap-icons/icons/bootstrap-fill.svg" alt="overview"
                     width="40" height="32">
                <span class="visually-hidden">Icon-only</span>
            </a>
            <ul class="nav nav-pills nav-flush flex-column mb-auto text-center">
                <li class="nav-item">
                    <a href="#" class="nav-link active py-3 border-bottom rounded-0" aria-current="page" title="Home"
                       data-bs-toggle="tooltip" data-bs-placement="right">
                        <img class="bi pe-none" src="../static/bootstrap-icons/icons/speedometer2.svg"
                             alt="overview" width="24" height="24">
                    </a>
                </li>
                <li>
                    <a href="#" class="nav-link py-3 border-bottom rounded-0" title="Orders" data-bs-toggle="tooltip"
                       data-bs-placement="right">
                        <img class="bi pe-none" src="../static/bootstrap-icons/icons/table.svg" alt="orders"
                             width="24" height="24">
                    </a>
                </li>
            </ul>
            <div class="dropdown border-top">
                <a href="#"
                   class="d-flex align-items-center justify-content-center p-3 link-dark text-decoration-none">
                    <img src="../static/src/awesome_gao-mini.jpg" alt="mdo" width="24" height="24"
                         class="rounded-circle">
                </a>
            </div>
        </div>
    </div>
    <div class="table-responsive ">
        <table class="table table-bordered table-hover" style="vertical-align: middle">
            <thead>
            {% for column in title %}
                <th width="100">{{ column }}</th>
            {% endfor %}
            </thead>
            <tbody>
            {% for stat in statistics %}
                <tr>
                    <td>{{ stat.month }}</td>
                    <td>{{ stat.total_num }}</td>
                    <td>{{ stat.reject }}</td>
                    <td>{{ stat.arrive }}</td>
                    <td>{{ stat.reject_rating }}%</td>
                    <td>{{ stat.times }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <div id="show" style="flex-grow: 1 !important;">
    </div>

    <script type="text/javascript">
        const colors = ['#5470C6', '#91CC75', '#EE6666'];
        const dom = document.getElementById('show');
        const myChart = echarts.init(dom, null, {
            renderer: 'canvas',
            useDirtyRect: false
        });
        const app = {};

        let option;

        const posList = [
            'left',
            'right',
            'top',
            'bottom',
            'inside',
            'insideTop',
            'insideLeft',
            'insideRight',
            'insideBottom',
            'insideTopLeft',
            'insideTopRight',
            'insideBottomLeft',
            'insideBottomRight'
        ];
        app.configParameters = {
            rotate: {
                min: -90,
                max: 90
            },
            align: {
                options: {
                    left: 'left',
                    center: 'center',
                    right: 'right'
                }
            },
            verticalAlign: {
                options: {
                    top: 'top',
                    middle: 'middle',
                    bottom: 'bottom'
                }
            },
            position: {
                options: posList.reduce(function (map, pos) {
                    map[pos] = pos;
                    return map;
                }, {})
            },
            distance: {
                min: 0,
                max: 0
            }
        };
        app.config = {
            rotate: 0,
            position: 'top',
            distance: 15,
            onChange: function () {
                const labelOption = {
                    rotate: app.config.rotate,
                    align: app.config.align,
                    verticalAlign: app.config.verticalAlign,
                    position: app.config.position,
                    distance: app.config.distance
                };
                myChart.setOption({
                    series: [
                        {
                            label: labelOption
                        },
                        {
                            label: labelOption
                        },
                        {
                            label: labelOption
                        },
                        {
                            label: labelOption
                        }
                    ]
                });
            }
        };
        const labelOption = {
            show: true,
            position: app.config.position,
            distance: app.config.distance,
            rotate: app.config.rotate,
            formatter: '{c}',
            fontSize: 16,
            rich: {
                name: {}
            }
        };
        const Rating_labelOption = {
            show: true,
            position: app.config.position,
            distance: app.config.distance,
            rotate: app.config.rotate,
            formatter: '{c}%',
            fontSize: 16,
            rich: {
                name: {}
            }
        };
        option = {
            grid: {
                left: '1%', // 调整左边距离
                right: '5%', // 调整右边距离
                top: '5%',
                containLabel: true // 让标签显示在绘图区域内部
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                }
            },
            legend: {
                data: ['单数', '驳回次数', '应用科驳回率', '驳回倍数'],
                bottom: 32
            },
            toolbox: {
                show: true,
                orient: 'vertical',
                left: 'right',
                top: 'center',
                feature: {
                    mark: {show: true},
                    magicType: {show: true, type: ['line', 'bar', 'stack']},
                    restore: {show: true},
                    saveAsImage: {show: true}
                }
            },
            xAxis: [
                {
                    type: 'category',
                    axisTick: {show: false},
                    data: {{ x_axis_data | safe }}
                }
            ],
            yAxis: [
                {
                    type: 'value',
                    name: '个数',
                    position: 'left',
                    alignTicks: true,
                    axisLine: {
                        show: true,
                        lineStyle: {
                            color: colors[0]
                        }
                    },
                    axisLabel: {
                        formatter: '{value} 个'
                    }
                },
                {
                    type: 'value',
                    name: '百分比',
                    min: 0,
                    max: 100,
                    position: 'right',
                    alignTicks: true,
                    axisLine: {
                        show: true,
                        lineStyle: {
                            color: colors[2]
                        }
                    },
                    axisLabel: {
                        formatter: '{value} %'
                    }
                },
                {
                    type: 'value',
                    name: '倍数',
                    offset: 80,
                    min: 1,
                    max: 2,
                    position: 'right',
                    alignTicks: true,
                    axisLine: {
                        show: true,
                        lineStyle: {
                            color: colors[2]
                        }
                    },
                    axisLabel: {
                        formatter: '{value}'
                    }
                }

            ],
            series: [
                {
                    name: '单数',
                    type: 'bar',
                    barGap: 0,
                    label: labelOption,
                    emphasis: {
                        focus: 'series'
                    },
                    yAxisIndex: 0,
                    data: {{ total_number | safe }}
                },
                {
                    name: '驳回次数',
                    type: 'bar',
                    label: labelOption,
                    emphasis: {
                        focus: 'series'
                    },
                    yAxisIndex: 0,
                    data: {{ reject_number | safe }}
                },
                {
                    name: '应用科驳回率',
                    type: 'line',
                    label: Rating_labelOption,
                    emphasis: {
                        focus: 'series'
                    },
                    yAxisIndex: 1,
                    data: {{ reject_rating | safe }}
                },
                {
                    name: '驳回倍数',
                    type: 'line',
                    label: labelOption,
                    emphasis: {
                        focus: 'series'
                    },
                    yAxisIndex: 2,
                    data: {{ reject_times | safe }}
                },
            ]
        };
        if (option && typeof option === 'object') {
            myChart.setOption(option);
        }
        window.addEventListener('resize', myChart.resize);
    </script>
</main>

</body>
</html>
